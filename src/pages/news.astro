---
import MainLayout from '../layouts/MainLayout.astro';
import NewsCard from '../components/news/NewsCard.astro';
import { getCollection } from 'astro:content';

const allNews = await getCollection('news');
const sortedNews = allNews.sort((a, b) => b.data.date.getTime() - a.data.date.getTime());
---

<MainLayout title="News - APIOS">
  <main class="pt-24 pb-16">
    <div class="max-w-7xl mx-auto px-4">
      <h1 class="font-roboto font-bold text-3xl mb-12 text-center">All News</h1>

      <div class="grid gap-8 md:grid-cols-2 lg:grid-cols-3">
        {sortedNews.map((news) => (
          <NewsCard
            title={news.data.title}
            date={news.data.date}
            image={news.data.image}
            content={news.body}
            link={news.data.link}
          />
        ))}
      </div>
    </div>
  </main>
</MainLayout>